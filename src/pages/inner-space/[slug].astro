---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('inner-space', ({ data }) => !data.draft);
	return posts.map((post) => ({ params: { slug: post.slug }, props: { post } }));
}

const { post } = Astro.props;
const { Content } = await post.render();
---

<Layout title={`${post.data.title} — bechtold.co`}>
	<article class="mx-auto max-w-3xl px-4 py-10">
		<header class="mb-10">
			<div class="text-xs uppercase tracking-wide text-text-muted">
				{post.data.id} · {post.data.date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}
			</div>
			<h1 class="mt-2 text-3xl font-semibold tracking-tight text-text">{post.data.title}</h1>
			{post.data.subtitle && <p class="mt-3 text-lg text-text-muted">{post.data.subtitle}</p>}
			{post.data.heroImage && (
				<img
					src={post.data.heroImage}
					alt="Inner Space Journey mascot"
					class="mt-8 w-full rounded-3xl border border-white/10 bg-black/20"
					loading="eager"
				/>
			)}
		</header>

		<div class="prose prose-invert max-w-none prose-headings:font-semibold prose-a:text-cyan-300">
			<Content />
		</div>

		<footer class="mt-12 border-t border-white/10 pt-8 text-sm text-text-muted">
			<a class="hover:underline" href="/inner-space">← Back to Inner Space Journey</a>
		</footer>
	</article>
</Layout>
