---
import Layout from '../../layouts/Layout.astro';
import InnerSpaceCard from '../../components/InnerSpaceCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('inner-space', ({ data }) => !data.draft))
	.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

const fmt = (d) =>
	d.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
---

<Layout title="Inner Space Journey — bechtold.co">
	<section class="bg-grain">
		<div class="mx-auto max-w-6xl px-4 py-10">
			<header class="grid gap-8 md:grid-cols-[1.2fr_0.8fr] md:items-end">
				<div>
					<div class="text-xs uppercase tracking-wide text-text-muted">Series</div>
					<h1 class="mt-3 font-display text-4xl tracking-tight text-text md:text-5xl">Inner Space Journey</h1>
					<p class="mt-4 max-w-2xl text-lg text-text-muted">
						Deep, lived experience—written like a journal entry. One idea, one practice. Cinematic, futuristic, grounded.
					</p>
				</div>
				<div class="rounded-3xl border border-white/10 bg-panel/60 p-6">
					<div class="text-sm font-semibold text-text">How to use this</div>
					<ul class="mt-3 space-y-2 text-sm text-text-muted">
						<li><span class="text-text">1 idea</span> per entry</li>
						<li><span class="text-text">1 practice</span> you can actually do</li>
						<li>Tags for future filtering</li>
					</ul>
				</div>
			</header>

			<div class="mt-10 grid gap-5 sm:grid-cols-2 lg:grid-cols-3">
				{posts.map((post) => (
					<InnerSpaceCard
						href={`/inner-space/${post.slug}`}
						id={post.data.id}
						title={post.data.title}
						subtitle={post.data.subtitle}
						date={fmt(post.data.date)}
						excerpt={post.data.excerpt}
						tags={post.data.tags}
						heroImage={post.data.heroImage}
					/>
				))}
			</div>
		</div>
	</section>
</Layout>
