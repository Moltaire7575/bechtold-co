---
import Layout from '../../layouts/Layout.astro';
import VideoCard from '../../components/VideoCard.astro';

// TODO: Replace mock with Supabase query (videos + tags) once env vars are set.
const mockVideos = Array.from({ length: 24 }).map((_, i) => ({
	title: `Episode ${i + 1} — Precision, Performance, Philosophy`,
	duration: `${10 + (i % 30)}m`,
	difficulty: (i % 5) + 1,
	pillar: ['Body', 'Mind', 'Spirit', 'Research', 'Expeditions', 'Experiments'][i % 6],
	tags: ['Sleep', 'Nutrition', 'Movement', 'Clarity', 'Presence'].slice(0, (i % 2) + 1),
	href: '/library/cinematic-scholar-protocol',
}));
---

<Layout title="Library — bechtold.co">
	
  <section class="relative overflow-hidden">
    <div class="absolute inset-0">
      <img src="/images/site/library-hero.png" alt="" class="h-full w-full object-cover opacity-80" loading="eager" />
      <div class="absolute inset-0 bg-gradient-to-b from-black/85 via-black/55 to-black"></div>
    </div>
    <div class="relative mx-auto max-w-6xl px-5 pb-10 pt-14 md:pb-12 md:pt-18">
      <p class="text-xs uppercase tracking-[0.18em] text-white/70">Library</p>
    </div>
  </section>
<section class="mx-auto max-w-6xl px-4 py-10">
		<div class="flex flex-col gap-6 md:flex-row md:items-end md:justify-between">
			<div class="max-w-2xl">
				<h1 class="font-display text-3xl tracking-tight text-text">Library</h1>
				<p class="mt-2 text-text-muted">
					Browse the collection. Filtering/search will be wired to Supabase early (pipeline priority).
				</p>
			</div>
			<div class="w-full max-w-md">
				<label class="sr-only" for="q">Search</label>
				<input
					id="q"
					name="q"
					placeholder="Search title, description, tags…"
					class="w-full rounded-2xl border border-white/10 bg-panel px-4 py-3 text-sm text-text placeholder:text-text-muted/60 focus:border-white/20"
				/>
			</div>
		</div>

		<div class="mt-10 grid gap-4 md:grid-cols-[260px_1fr]">
			<aside class="hidden rounded-3xl border border-white/10 bg-panel p-5 md:block">
				<div class="space-y-5 text-sm">
					<div>
						<div class="font-medium text-text">Pillar</div>
						<div class="mt-3 flex flex-wrap gap-2">
							{['Body', 'Mind', 'Spirit', 'Research', 'Expeditions', 'Experiments'].map((p) => (
								<span class="rounded-full border border-white/10 bg-black/20 px-3 py-1 text-text-muted">{p}</span>
							))}
						</div>
					</div>

					<div>
						<div class="font-medium text-text">Format</div>
						<div class="mt-3 flex flex-wrap gap-2">
							{['Lecture', 'Workout', 'Guided', 'Interview', 'Documentary', 'Protocol', 'Experiment'].map((f) => (
								<span class="rounded-full border border-white/10 bg-black/20 px-3 py-1 text-text-muted">{f}</span>
							))}
						</div>
					</div>

					<div>
						<div class="font-medium text-text">Difficulty</div>
						<div class="mt-3 flex flex-wrap gap-2">
							{[1, 2, 3, 4, 5].map((d) => (
								<span class="rounded-full border border-white/10 bg-black/20 px-3 py-1 text-text-muted">{d}</span>
							))}
						</div>
					</div>
				</div>
			</aside>

			<section>
				<div class="grid grid-cols-2 gap-3 sm:grid-cols-3 lg:grid-cols-4">
					{mockVideos.map((v) => (
						<VideoCard {...v} />
					))}
				</div>
			</section>
		</div>
	</section>
</Layout>
